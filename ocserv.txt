# Install ocserv
yum install -y ocserv

# Copy the following cert 
# /etc/ocserv/cert/server.crt
# /etc/ocserv/cert/server.key

# Edit the conf file
vim /etc/ocserv/ocserv.conf
# Start
auth = "certificate"
max-clients = 10
max-same-clients = 10
tcp-port = port
udp-port = port
keepalive = 32400
dpd = 90
mobile-dpd = 1800
try-mtu-discovery = true
server-cert = /etc/ocserv/cert/server-cert.pem
server-key = /etc/ocserv/cert/server-key.pem
ca-cert = /etc/ocserv/cert/ca-cert.pem
cert-user-oid = 2.5.4.3

tls-priorities = "NORMAL:%SERVER_PRECEDENCE:%COMPAT:-VERS-SSL3.0"
auth-timeout = 40
min-reauth-time = 120
cookie-timeout = 300
deny-roaming = false
rekey-time = 172800
rekey-method = ssl
use-utmp = true
use-occtl = true
pid-file = /var/run/ocserv.pid
socket-file = ocserv.sock
run-as-user = ocserv
run-as-group = ocserv
device = vpns
output-buffer = 23000
# default-domain = example.com
ipv4-network = 192.168.10.0
ipv4-netmask = 255.255.255.0
dns = 8.8.8.8
dns = 8.8.4.4
ping-leases = false
cisco-client-compat = true
# End

# Start at boot
vim /etc/supervisord.conf
# Start
[program:ocserv]
command=systemctl start ocserv.service
autostart=true
autorestart=true
user=root
log_stderr=true
logfile=/var/log/ocserv.log
# End
