yum -y install epel-release
# download yum repo on Fedora Copr(https://copr.fedorainfracloud.org/coprs/librehat/shadowsocks/) and put it inside /etc/yum.repos.d/
yum -y update
yum -y install shadowsocks-libev supervisor

vim /etc/shadowsocks-libev/config.json
# Start
{
    "server":"0.0.0.0",
    "server_port":22,
    "local_address":"127.0.0.1",
    "local_port":1080,
    "password":"your password",
    "timeout":600,
    "method":"aes-256-cfb",
    "fast_open":true
}
# End

vim /etc/default/shadowsocks-libev
# Start
DAEMON_ARGS="-u -A"
# End

vim /etc/supervisord.conf
# Start
[program:shadowsocks]
command=systemctl start shadowsocks-libev
autostart=true
autorestart=true
user=root
log_stderr=true
logfile=/var/log/shadowsocks.log
# End

vim /etc/rc.local
# Start
supervisord -c /etc/supervisord.conf
# End

chmod +x /etc/rc.local
sysctl -w net.ipv4.ip_forward=1
echo net.ipv4.ip_forward = 1 >> "/etc/sysctl.conf"
systemctl daemon-reload
reboot
