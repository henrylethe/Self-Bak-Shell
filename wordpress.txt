# Install and run mariadb
yum -y install mariadb-server mariadb
systemctl start mariadb.service
systemctl enable mariadb.service

# MariaDB basic setting
mysql_secure_installation
mysql -u root -p
# The "user", "username" and "password" below should be change
create database user;
create user username@localhost;
SET PASSWORD FOR username@localhost= PASSWORD("password");
GRANT ALL PRIVILEGES ON user.* TO username@localhost IDENTIFIED BY 'password';

# Install and run apache
yum -y install httpd
systemctl start httpd.service
systemctl enable httpd.service

# Set firewall rules
firewall-cmd --permanent --zone=public --add-service=http 
firewall-cmd --permanent --zone=public --add-service=https
firewall-cmd --reload

# Install and run php
yum -y install php
systemctl restart httpd.service
yum -y install php-mysql
systemctl restart httpd.service
yum -y install phpMyAdmin

# Edit phpMyAdmin setting
vim /etc/httpd/conf.d/phpMyAdmin.conf
# Modify start
[...]
Alias /phpMyAdmin /usr/share/phpMyAdmin
Alias /phpmyadmin /usr/share/phpMyAdmin

#<Directory /usr/share/phpMyAdmin/>
#   <IfModule mod_authz_core.c>
#     # Apache 2.4
#     <RequireAny>
#       Require ip 127.0.0.1
#       Require ip ::1
#     </RequireAny>
#   </IfModule>
#   <IfModule !mod_authz_core.c>
#     # Apache 2.2
#     Order Deny,Allow
#     Deny from All
#     Allow from 127.0.0.1
#     Allow from ::1
#   </IfModule>
#</Directory>

<Directory /usr/share/phpMyAdmin/>
        Options none
        AllowOverride Limit
        Require all granted
</Directory>
[...]
# Modify end

# Edit phpMyAdmin auth type
vim /etc/phpMyAdmin/config.inc.php
# Start
[From]  $cfg['Servers'][$i]['auth_type'] = 'cookie'; 
[To]    $cfg['Servers'][$i]['auth_type'] = 'http';
# End

systemctl restart httpd.service

# Connect to http://server_ip/phpmyadmin
# Log in and change the wordpress database's encoding to "utf8_unicode_ci"

# Install wordpress
cd /var/www/html
wget https://wordpress.org/latest.tar.gz
tar -xzvf latest.tar.gz
rm latest.tar.gz
cp -r /var/www/html/wordpress/. /var/www/html
rm -rf /var/www/html/wordpress/

# Modify authority
chown -R apache:apache /var/www/html
chmod -R 755 /var/www/html
systemctl restart httpd.service

# Connect http://server_ip/wordpress to test
# Change phpMyAdmin.conf back to orginal version

# Modify authority
chrown apache:apache /your/wordpress/folder/
find /your/wordpress/folder/ -type d -exec chmod 755 {}
find /your/wordpress/folder/ -type f -exec chmod 644 {}
